/*! (C) Andrea Giammarchi - @WebReflection - Mit Style License */
define(function(){function e(e,n){var r,i,s,o="pending",u=new Promise(function(t,n){e(r=function(e){o==="pending"&&(o="resolved",u.status=o,t(e))},i=function(e){o==="pending"&&(o="rejected",u.status=o,n(e))},function(t){s=function(e){o==="pending"&&(o="aborted",u.status=o,n(t(e)))}})});return t(u,n,s,r,i)}function t(e,n,r,i,s){var o=e.then,u=e.catch;return r&&(e.abort=r),n&&(e.resolve=i,e.reject=s),e.then=function(){return t(o.apply(e,arguments),n,r,i,s)},e["catch"]=function(){return t(u.apply(e,arguments),n,r,i,s)},e}return e.race=function(e){function n(t){for(var n=0;n<e.length;n++)"abort"in e[n]&&e[n].abort();return t}var t=Promise.race(e).then(n);return t.abort=n,t},e});