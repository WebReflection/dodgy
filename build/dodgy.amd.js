/*! (C) Andrea Giammarchi - @WebReflection - Mit Style License */
define(function(){function e(e,n){var r,i,s,o=!1,u=new Promise(function(t,n){e(r=function(n){o=!0,t(n)},i=function(t){o=!0,n(t)},function(t){s=function(n){o||i(t((o=!0)&&n))}})});return s?t(u,!!n,r,i,s):u}function t(e,n,r,i,s){function o(o){return function(){return t(o.apply(e,arguments),n,r,i,s)}}return e.then=o(e.then),e["catch"]=o(e["catch"]),e.abort=s,n&&(e.resolve=r,e.reject=i),e}return e.race=function(e){function n(t){for(var n=0;n<e.length;n++)"abort"in e[n]&&e[n].abort();return t}var t=Promise.race(e).then(n);return t.abort=n,t},e});